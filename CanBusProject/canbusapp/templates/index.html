<!DOCTYPE html>  
<html lang="en">  
<head>  
    <meta charset="UTF-8">  
    <title>CANBUS</title>  
    {% load static %}  
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

    
    <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">  
    <script src="{% static 'js/bootstrap.min.js' %}"></script>

    <link rel="stylesheet" href="static/css/style.css">
</head>  
<body>  
     <div class="container">
       <aside>
         <div class="top">
           <div class="logo">
             <img src="static/images/logo.png">
             <h2>PROMTECH</h2>
           </div>
           <div class="close" id="close-btn">
             <span class="material-symbols-outlined">
              close
             </span>
           </div>
         </div>
         <div class="sidebar">
           <a href="{% url 'vcan0' %}" class="text-decoration-none text-reset {% if navbar == 'vcan0' %} active {% endif %}">
             <span class="material-symbols-outlined">
                space_dashboard
             </span>
             <h3>Vcan 0</h3>
           </a>
           <a href="{% url 'vcan1' %}" class="text-decoration-none text-reset" color="balck">
             <span class="material-symbols-outlined">
                space_dashboard
             </span>
             <h3>Vcan 1</h3>
           </a>
           <a href="{% url 'vcan2' %}" class="text-decoration-none text-reset" color="balck">
             <span class="material-symbols-outlined">
                space_dashboard
             </span>
             <h3>Vcan 2</h3>
           </a>
           <a href="{% url 'vcan3' %}" class="text-decoration-none text-reset" color="balck">
             <span class="material-symbols-outlined">
                space_dashboard
             </span>
             <h3>Vcan 3</h3>
           </a>
           <a href="{% url 'vcan4' %}" class="text-decoration-none text-reset" color="balck">
             <span class="material-symbols-outlined">
                space_dashboard
             </span>
             <h3>Vcan 4</h3>
           </a>
           <a href="{% url 'vcan5' %}" class="text-decoration-none text-reset" color="balck">
             <span class="material-symbols-outlined">
                space_dashboard
             </span>
             <h3>Vcan 5</h3>
           </a>
           <a href="{% url 'vcan6' %}" class="text-decoration-none text-reset" color="balck">
             <span class="material-symbols-outlined">
                space_dashboard
             </span>
             <h3>Vcan 6</h3>
           </a>
           <a href="{% url 'vcan7' %}" class="text-decoration-none text-reset" color="balck">
             <span class="material-symbols-outlined">
                space_dashboard
             </span>
             <h3>Vcan 7</h3>
           </a>
         </div>
       </aside>
       <main>
           {% block nameteble %}
           {%endblock%}
           <div class="info-send">
               <div class="center">
                   <div class="table-responsive">
                    <table class="table table-hover">
                        <thead class="header">
                            <tr>
                                <th>ID</th>
                                <th>DLC</th>
                                <th>DATA</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% block mainsection %}
                            {% endblock %}
                        </tbody>
                    </table>
                    </div>
               </div>
           </div>
       </main>
       <div class="right">
            <div class="control_panel">
                <h2>Control panel</h2>
                <div class="controls">
                    <div class="control">
                        <h4>Start data sending</h4>
<!--                        <form method="post">-->
<!--                            {% csrf_token %}-->
                            <button type="button" class="btn btn-info" id="{{ interface }}startId" name="{{ interface }}start">Start {{ interface }}</button>
<!--                        </form>-->
                    </div>
                    <div class="control">
                        <h4>Stop data sending</h4>
                        <form method="post">
                            {% csrf_token %}
                            {% block btnstop %}
                            {% endblock %}
                        </form>
                    </div>
                </div>
            </div>
       </div>
     </div>
</body>

<script>
    function getCookie(name) {
    let cookieValue = null;
    if (document.cookie && document.cookie !== '') {
        const cookies = document.cookie.split(';');
        for (let i = 0; i < cookies.length; i++) {
            const cookie = cookies[i].trim();
            // Does this cookie string begin with the name we want?
            if (cookie.substring(0, name.length + 1) === (name + '=')) {
                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                break;
            }
        }
    }
    return cookieValue;
    }

    const csrftoken = Cookies.get('csrftoken');

    $('#vcan0startId').click(function() {
    $.ajax({
        url: '/vcan0',
        headers: {'X-CSRFToken': csrftoken},
        method: 'POST', // or another (GET), whatever you need
        data: {// data you need to pass to your function
            click: true
        },
        success: function (data) {
            console.log(111)
            // success callback
            // you can process data returned by function from views.py
        }
    });
});
</script>
</html>

